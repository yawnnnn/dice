(this.webpackJsonpdice=this.webpackJsonpdice||[]).push([[0],{17:function(e,t,a){e.exports=a(26)},22:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(11),r=a.n(s),l=(a(22),a(3)),c=a(5),o=a(8),u=a(7),d=a(9),m=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("button",{className:"btn btn-outline-primary",onClick:function(){return e.props.onClick()}},this.props.sides)}}]),t}(i.a.Component),h=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,[{key:"roll",value:function(e){return Math.floor(Math.random()*Number(e))+1}}]),e}(),p=function e(){Object(l.a)(this,e),this.id=void 0,this.diceString=void 0,this.total=void 0,this.dateTime=void 0,this.isCritical=void 0,this.id=0,this.diceString="",this.total=0,this.dateTime=new Date(2020,0,1).valueOf(),this.isCritical=!1},f=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={selected:{},selectedString:"",rolled:[],total:0,isCritical:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){JSON.stringify(e.dice)!==JSON.stringify(this.props.dice)&&this.setState({selected:this.props.dice,selectedString:this.parseDiceObj(this.props.dice)})}},{key:"select",value:function(e){var t=this.state.selected,a=e.toString();t[a]=t[a]?t[a]+1:1;var n=[];for(var i in t){var s=t[i].toString()+"d"+i;n.push(s)}var r=n.join(" + ");this.setState({selected:t,selectedString:r})}},{key:"roll",value:function(){var e=[],t=0,a=this.state.selected;if(Object.keys(a).length>0){for(var n in a)for(var i=this.state.isCritical?2*a[n]:a[n],s=0;s<i;s++){var r=(new h).roll(Number(n));e.push(r),t+=r}this.setState({rolled:e,total:t});var l=new p;l.id=1,l.diceString=this.generateFinalDiceString(),l.total=t,l.dateTime=new Date(Date.now()).valueOf(),l.isCritical=this.state.isCritical,this.props.onRoll(l)}}},{key:"clear",value:function(){this.setState({selected:{},selectedString:"",rolled:[],total:0}),this.props.onClear({})}},{key:"changeSelectedString",value:function(e){this.setState({selectedString:e.target.value})}},{key:"blurSelectedString",value:function(){if(""!==this.state.selectedString){var e={},t=this.state.selectedString.slice(0);(t=t.replace(" ","")).split("+").forEach((function(t){var a=t.split("d"),n=Number(a[0]),i=a[1];e[i.toString()]=n})),this.setState({selected:e})}}},{key:"generateFinalDiceString",value:function(){var e="";if(this.state.isCritical){var t=this.state.selectedString.slice(0),a=(t=t.replace(" ","")).split("+"),n=[];a.forEach((function(e){var t=e.split("d"),a=2*Number(t[0]),i=t[1];n.push(a.toString()+"d"+i)})),e=n.join(" + ")}else e=this.state.selectedString;return e}},{key:"parseDiceObj",value:function(e){var t=[];for(var a in e){var n=e[a].toString()+"d"+a;t.push(n)}return t.join(" + ")}},{key:"toggleCritical",value:function(){this.setState({isCritical:!this.state.isCritical})}},{key:"renderDice",value:function(e){var t=this;return i.a.createElement(m,{sides:e,onClick:function(){return t.select(e)}})}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"results p-lg m-b-md"},1===this.state.rolled.length?this.state.total:null,this.state.rolled.length>1?this.state.rolled.join(" + ")+" = "+this.state.total:null),i.a.createElement("div",null,i.a.createElement("div",{className:"m-b"},i.a.createElement("span",{className:"m-r-sm"},this.renderDice(4)),i.a.createElement("span",{className:"m-r-sm"},this.renderDice(6)),i.a.createElement("span",{className:"m-r-sm"},this.renderDice(8)),i.a.createElement("span",{className:"m-r-sm"},this.renderDice(10)),i.a.createElement("span",{className:"m-r-sm"},this.renderDice(20)),i.a.createElement("span",null,this.renderDice(100))),i.a.createElement("div",{className:"m-b d-flex flex-row align-items-center"},i.a.createElement("div",{className:"flex-1 m-r"},i.a.createElement("input",{className:"text-center form-control m-r-sm",value:this.state.selectedString,onChange:function(t){return e.changeSelectedString(t)},onBlur:function(){return e.blurSelectedString()}})),i.a.createElement("input",{type:"checkbox",checked:this.state.isCritical,onChange:function(){return e.toggleCritical()}})),i.a.createElement("div",null,i.a.createElement("span",{className:"m-r-sm"},i.a.createElement("button",{className:"btn btn-outline-dark",onClick:function(){return e.clear()}},"Clear")),i.a.createElement("button",{className:"btn btn-outline-dark",onClick:function(){return e.roll()}},"Roll"))))}}]),t}(i.a.Component),v=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={name:a.props.preset?a.props.preset.name:"",diceString:a.props.preset?a.props.preset.diceString:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"changeName",value:function(e){this.setState({name:e.target.value})}},{key:"changeDice",value:function(e){this.setState({diceString:e.target.value})}},{key:"parseDiceString",value:function(){var e={};if(""!==this.state.diceString){var t=this.state.diceString;(t=t.replace(" ","")).split("+").forEach((function(t){var a=t.split("d"),n=Number(a[0]),i=a[1];e[i.toString()]=n}))}return e}},{key:"delete",value:function(e){this.props.onDelete(this.props.index),e.preventDefault()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"list-group-item list-group-item-action"},i.a.createElement("div",{className:"d-flex flex-row align-items-center"},i.a.createElement("div",{className:"flex-1 d-flex flex-row",onClick:function(){return e.props.onClick(e.parseDiceString())}},i.a.createElement("span",{className:"flex-1"},this.state.name),i.a.createElement("span",{className:"flex-1"},this.state.diceString)),i.a.createElement("span",null,i.a.createElement("button",{className:"btn btn-outline-danger btn-sm",onClick:function(t){return e.delete(t)}},"Delete"))))}}]),t}(i.a.Component),g=function e(){Object(l.a)(this,e),this.id=void 0,this.name=void 0,this.diceString=void 0,this.id=0,this.name="",this.diceString=""},S=a(13),b=a(14),y=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={name:"",diceString:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"changeName",value:function(e){this.setState({name:e.target.value})}},{key:"changeDiceString",value:function(e){this.setState({diceString:e.target.value})}},{key:"save",value:function(){""!==this.state.name&&""!==this.state.diceString&&(this.props.onSave({name:this.state.name,diceString:this.state.diceString}),this.setState({name:"",diceString:""}))}},{key:"close",value:function(){this.setState({name:"",diceString:""}),this.props.onClose()}},{key:"render",value:function(){var e=this;return i.a.createElement(S.a,{show:this.props.show,onHide:this.props.onClose,backdrop:"static",animation:!1,centered:!0,size:"sm"},i.a.createElement(S.a.Header,null,i.a.createElement(S.a.Title,null,"Add Preset")),i.a.createElement(S.a.Body,null,i.a.createElement("div",{className:"d-flex flex-row justify-content-between m-b-sm"},i.a.createElement("div",null,"Name"),i.a.createElement("div",null,i.a.createElement("input",{value:this.state.name,onChange:function(t){return e.changeName(t)}}))),i.a.createElement("div",{className:"d-flex flex-row justify-content-between"},i.a.createElement("div",null,"Dice"),i.a.createElement("div",null,i.a.createElement("input",{value:this.state.diceString,onChange:function(t){return e.changeDiceString(t)}})))),i.a.createElement(S.a.Footer,null,i.a.createElement(b.a,{variant:"secondary",onClick:function(){return e.close()}},"Close"),i.a.createElement(b.a,{variant:"primary",onClick:function(){return e.save()}},"Save")))}}]),t}(i.a.Component),E=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={presets:a.props.presets?a.props.presets:[],showModal:!1},a.onModalClose=function(){a.setState({showModal:!1})},a.onModalSave=function(e){if(a.state.presets.length<4){var t=a.state.presets.slice(),n=new g;n.id=t.length+1,n.name=e.name,n.diceString=e.diceString,t.push(n),a.setState({presets:t,showModal:!1}),a.props.onAdd(n)}else a.setState({showModal:!1})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){JSON.stringify(e.presets)!==JSON.stringify(this.props.presets)&&this.setState({presets:this.props.presets})}},{key:"openModal",value:function(){this.setState({showModal:!0})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-between m-b-md"},i.a.createElement("div",{className:"font-semibold "},"Presets"),i.a.createElement("button",{className:"btn btn-sm btn-outline-dark",onClick:function(){return e.openModal()}},"Add")),i.a.createElement("div",{className:"list-group d-flex flex-column"},0===this.state.presets.length?i.a.createElement("div",{className:"list-group-item"},"No Presets"):null,this.state.presets.map((function(t,a){return i.a.createElement(v,{key:t.id,preset:t,index:a,onClick:e.props.onClick,onDelete:e.props.onDelete})}))),i.a.createElement(y,{show:this.state.showModal,onClose:this.onModalClose,onSave:this.onModalSave}))}}]),t}(i.a.Component),N=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"list-group-item "+(this.props.history.isCritical?"list-group-item-danger":"")},i.a.createElement("div",{className:"d-flex flex-row align-items-center"},i.a.createElement("div",{className:"flex-1 text-left text-xs"},new Date(this.props.history.dateTime).toLocaleDateString()+" "+new Date(this.props.history.dateTime).toLocaleTimeString()),i.a.createElement("div",{className:"flex-1"},this.props.history.diceString),i.a.createElement("div",{className:"flex-1"},this.props.history.total)))}}]),t}(i.a.Component),O=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"font-semibold text-left m-b-md"},"History"),i.a.createElement("div",{className:"list-group"},0===this.props.history.length?i.a.createElement("div",{className:"list-group-item"},"No History"):null,this.props.history.map((function(e,t){return i.a.createElement(N,{key:e.id,history:e})}))))}}]),t}(i.a.Component),j=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={dice:{},presets:JSON.parse(localStorage.getItem("presets")||"[]"),history:JSON.parse(localStorage.getItem("history")||"[]")},a.updateDiceObj=function(e){a.setState({dice:e})},a.addPreset=function(e){var t=a.state.presets.slice(0);t.push(e),a.setState({presets:t}),localStorage.setItem("presets",JSON.stringify(t))},a.deletePreset=function(e){var t=a.state.presets.slice(0);t.splice(e,1),a.setState({presets:t}),localStorage.setItem("presets",JSON.stringify(t))},a.addHistory=function(e){e.id=a.state.history.length>0?a.state.history[0].id+1:1;var t=a.state.history.splice(0);5===t.length&&t.pop(),t.unshift(e),a.setState({history:t}),localStorage.setItem("history",JSON.stringify(t))},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"body"},i.a.createElement("div",{className:"p-md fade-in"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-8 full-height d-flex m-b-md"},i.a.createElement("div",{className:"card flex-1 d-flex align-items-center justify-content-center p-lg"},i.a.createElement(f,{dice:this.state.dice,onRoll:this.addHistory,onClear:this.updateDiceObj}))),i.a.createElement("div",{className:"d-flex flex-column col-lg-4 m-b-md"},i.a.createElement("div",{className:"card m-b-md p-lg"},i.a.createElement(E,{presets:this.state.presets,onClick:this.updateDiceObj,onAdd:this.addPreset,onDelete:this.deletePreset})),i.a.createElement("div",{className:"card p-lg"},i.a.createElement(O,{history:this.state.history}))))))}}]),t}(i.a.Component),k=(a(25),function(){return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"header"}),i.a.createElement(j,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[17,1,2]]]);
//# sourceMappingURL=main.d09cc541.chunk.js.map