(this.webpackJsonpdice=this.webpackJsonpdice||[]).push([[0],{17:function(e,t,a){e.exports=a(26)},22:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),s=a.n(i),c=(a(22),a(3)),l=a(5),o=a(8),u=a(7),h=a(9),d=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("button",{onClick:function(){return e.props.onClick()}},this.props.sides)}}]),t}(r.a.Component),m=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,[{key:"roll",value:function(e){return Math.floor(Math.random()*Number(e))+1}}]),e}(),p=function e(){Object(c.a)(this,e),this.id=void 0,this.diceString=void 0,this.total=void 0,this.dateTime=void 0,this.id=0,this.diceString="",this.total=0,this.dateTime=new Date(2020,0,1).valueOf()},v=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selected:{},selectedString:"",rolled:[],total:0},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){JSON.stringify(e.dice)!==JSON.stringify(this.props.dice)&&this.setState({selected:this.props.dice,selectedString:this.parseDiceObj(this.props.dice)})}},{key:"select",value:function(e){var t=this.state.selected,a=e.toString();t[a]=t[a]?t[a]+1:1;var n=[];for(var r in t){var i=t[r].toString()+"d"+r;n.push(i)}var s=n.join(" + ");this.setState({selected:t,selectedString:s})}},{key:"roll",value:function(){var e=[],t=0,a=this.state.selected;if(Object.keys(a).length>0){for(var n in a)for(var r=0;r<a[n];r++){var i=(new m).roll(Number(n));e.push(i),t+=i}this.setState({rolled:e,total:t});var s=new p;s.id=1,s.diceString=this.state.selectedString,s.total=t,s.dateTime=new Date(Date.now()).valueOf(),this.props.onRoll(s)}}},{key:"clear",value:function(){this.setState({selected:{},selectedString:"",rolled:[],total:0})}},{key:"changeSelectedString",value:function(e){this.setState({selectedString:e.target.value})}},{key:"blurSelectedString",value:function(){if(""!==this.state.selectedString){var e={},t=this.state.selectedString;(t=t.replace(" ","")).split("+").forEach((function(t){var a=t.split("d"),n=Number(a[0]),r=a[1];e[r.toString()]=n})),this.setState({selected:e})}}},{key:"parseDiceObj",value:function(e){var t=[];for(var a in e){var n=e[a].toString()+"d"+a;t.push(n)}return t.join(" + ")}},{key:"renderDice",value:function(e){var t=this;return r.a.createElement(d,{sides:e,onClick:function(){return t.select(e)}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"results m-b-md"},1===this.state.rolled.length?this.state.total:null,this.state.rolled.length>1?this.state.rolled.join(" + ")+" = "+this.state.total:null),r.a.createElement("div",{className:"m-b"},r.a.createElement("span",{className:"m-r-sm"},this.renderDice(4)),r.a.createElement("span",{className:"m-r-sm"},this.renderDice(6)),r.a.createElement("span",{className:"m-r-sm"},this.renderDice(8)),r.a.createElement("span",{className:"m-r-sm"},this.renderDice(10)),r.a.createElement("span",{className:"m-r-sm"},this.renderDice(20)),r.a.createElement("span",{className:"m-r-sm"},this.renderDice(100))),r.a.createElement("div",{className:"m-b"},r.a.createElement("input",{className:"text-center",value:this.state.selectedString,onChange:function(t){return e.changeSelectedString(t)},onBlur:function(){return e.blurSelectedString()}})),r.a.createElement("div",null,r.a.createElement("span",{className:"m-r-sm"},r.a.createElement("button",{onClick:function(){return e.clear()}},"Clear")),r.a.createElement("button",{onClick:function(){return e.roll()}},"Roll")))}}]),t}(r.a.Component),f=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={name:a.props.preset?a.props.preset.name:"",diceString:a.props.preset?a.props.preset.diceString:""},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"changeName",value:function(e){this.setState({name:e.target.value})}},{key:"changeDice",value:function(e){this.setState({diceString:e.target.value})}},{key:"parseDiceString",value:function(){var e={};if(""!==this.state.diceString){var t=this.state.diceString;(t=t.replace(" ","")).split("+").forEach((function(t){var a=t.split("d"),n=Number(a[0]),r=a[1];e[r.toString()]=n}))}return e}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("span",null,this.state.name),r.a.createElement("span",null,this.state.diceString),r.a.createElement("button",{onClick:function(){return e.props.onClick(e.parseDiceString())}},"Use"))}}]),t}(r.a.Component),g=function e(){Object(c.a)(this,e),this.id=void 0,this.name=void 0,this.diceString=void 0,this.id=0,this.name="",this.diceString=""},S=a(13),y=a(14),b=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",diceString:""},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"changeName",value:function(e){this.setState({name:e.target.value})}},{key:"changeDiceString",value:function(e){this.setState({diceString:e.target.value})}},{key:"save",value:function(){this.props.onSave({name:this.state.name,diceString:this.state.diceString})}},{key:"render",value:function(){var e=this;return r.a.createElement(S.a,{show:this.props.show,onHide:this.props.onClose,backdrop:"static",animation:!1,centered:!0,size:"sm"},r.a.createElement(S.a.Header,null,r.a.createElement(S.a.Title,null,"Add Preset")),r.a.createElement(S.a.Body,null,r.a.createElement("div",null,r.a.createElement("input",{value:this.state.name,onChange:function(t){return e.changeName(t)}})),r.a.createElement("div",null,r.a.createElement("input",{value:this.state.diceString,onChange:function(t){return e.changeDiceString(t)}}))),r.a.createElement(S.a.Footer,null,r.a.createElement(y.a,{variant:"secondary",onClick:this.props.onClose},"Close"),r.a.createElement(y.a,{variant:"primary",onClick:function(){return e.save()}},"Save")))}}]),t}(r.a.Component),O=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={presets:a.props.presets?a.props.presets:[],showModal:!1},a.onModalClose=function(){a.setState({showModal:!1})},a.onModalSave=function(e){if(a.state.presets.length<5){var t=a.state.presets.slice(),n=new g;n.id=t.length+1,n.name=e.name,n.diceString=e.diceString,t.push(n),a.setState({presets:t,showModal:!1}),a.props.onAdd(n)}else a.setState({showModal:!1})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"openModal",value:function(){this.setState({showModal:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex flex-row justify-content-between"},r.a.createElement("div",null,"Presets"),r.a.createElement("button",{onClick:function(){return e.openModal()}},"Add")),this.state.presets.map((function(t){return r.a.createElement(f,{key:t.id,preset:t,onClick:e.props.onClick})})),r.a.createElement(b,{show:this.state.showModal,onClose:this.onModalClose,onSave:this.onModalSave}))}}]),t}(r.a.Component),E=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.history.diceString+" "+this.props.history.total+" "+this.props.history.dateTime.toString())}}]),t}(r.a.Component),j=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.history.map((function(e,t){return r.a.createElement(E,{key:t,history:e})})))}}]),t}(r.a.Component),k=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={dice:{},presets:JSON.parse(localStorage.getItem("presets")||"[]"),history:JSON.parse(localStorage.getItem("history")||"[]")},a.updateDiceObj=function(e){a.setState({dice:e})},a.addPreset=function(e){var t=JSON.parse(JSON.stringify(a.state.presets));t.push(e),a.setState({presets:t}),localStorage.setItem("presets",JSON.stringify(t))},a.addHistory=function(e){var t=a.state.history.splice(0);5===t.length&&t.shift(),t.push(e),a.setState({history:t}),localStorage.setItem("history",JSON.stringify(t))},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"deletePreset",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"full-height d-flex flex-row p"},r.a.createElement("div",{className:"card flex-2 d-flex align-items-center justify-content-center m-r"},r.a.createElement(v,{dice:this.state.dice,onRoll:this.addHistory})),r.a.createElement("div",{className:"d-flex flex-column flex-1"},r.a.createElement("div",{className:"card flex-1 m-b p-lg"},r.a.createElement(O,{presets:this.state.presets,onClick:this.updateDiceObj,onAdd:this.addPreset})),r.a.createElement("div",{className:"card flex-1 d-flex align-items-center justify-content-center p-lg"},r.a.createElement(j,{history:this.state.history}))))}}]),t}(r.a.Component),N=(a(25),function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"header"}),r.a.createElement(k,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[17,1,2]]]);
//# sourceMappingURL=main.3a40677b.chunk.js.map